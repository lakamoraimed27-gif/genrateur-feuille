<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de feuilles PDF/PNG</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Générateur de feuilles personnalisées</h1>
        <p>Créez vos feuilles vierges, quadrillées ou pointillées en PDF ou PNG !</p>
    </header>

    <main>
        <section class="controls">
            <label for="type">Type de feuille :</label>
            <select id="type">
                <option value="vierge">Vierge</option>
                <option value="quadrille5">Quadrillée 5×5 mm</option>
                <option value="quadrille10">Quadrillée 1 cm</option>
                <option value="quadrille2.5">Quadrillée 2,5 mm</option>
                <option value="pointille5">Pointillée 5 mm</option>
                <option value="pointille10">Pointillée 1 cm</option>
                <option value="isometrique">Isométrique</option>
                <option value="hexagonale">Hexagonale</option>
                <option value="ligneSimple">Lignes simples</option>
                <option value="ligneDouble">Lignes doubles</option>
            </select>

            <label for="size">Taille de la grille (mm) :</label>
            <input type="number" id="size" value="5" min="2" max="20">

            <label for="color">Couleur des lignes :</label>
            <input type="color" id="color" value="#cccccc">

            <label for="orientation">Orientation :</label>
            <select id="orientation">
                <option value="portrait">Portrait</option>
                <option value="paysage">Paysage</option>
            </select>

            <button onclick="generate()">Générer</button>
        </section>

        <section class="preview">
            <canvas id="sheet" width="800" height="1100"></canvas>
            <div class="buttons">
                <button onclick="downloadPNG()">Télécharger PNG</button>
                <button onclick="downloadPDF()">Télécharger PDF</button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Générateur de feuilles. Tous droits réservés.</p>
        <p>Zone future pour publicité ou annonces.</p>
    </footer>

    <script src="script.js">
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>
</html>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f7f7f7;
    color: #333;
}

header {
    background: #4a90e2;
    color: #fff;
    padding: 20px;
    text-align: center;
}

header h1 {
    margin: 0 0 10px 0;
}

main {
    display: flex;
    flex-wrap: wrap;
    padding: 20px;
    justify-content: center;
    gap: 20px;
}

.controls {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    flex: 1 1 300px;
    max-width: 350px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.controls label {
    display: block;
    margin-top: 10px;
}

.controls input, .controls select, .controls button {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

.controls button {
    background: #4a90e2;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
}

.controls button:hover {
    background: #357ABD;
}

.preview {
    flex: 2 1 600px;
    text-align: center;
}

canvas {
    border: 1px solid #aaa;
    max-width: 100%;
    height: auto;
    margin-bottom: 10px;
}

.buttons button {
    margin: 5px;
    padding: 10px 20px;
    cursor: pointer;
    border: none;
    border-radius: 5px;
    background: #4a90e2;
    color: #fff;
}

.buttons button:hover {
    background: #357ABD;
}

footer {
    text-align: center;
    padding: 20px;
    background: #eee;
    margin-top: 20px;
}
function generate() {
    let type = document.getElementById("type").value;
    let size = parseFloat(document.getElementById("size").value);
    let color = document.getElementById("color").value;
    let orientation = document.getElementById("orientation").value;

    let canvas = document.getElementById("sheet");
    let ctx = canvas.getContext("2d");

    // Ajuster orientation
    if(orientation === "paysage") {
        canvas.width = 1100;
        canvas.height = 800;
    } else {
        canvas.width = 800;
        canvas.height = 1100;
    }

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#fff";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.strokeStyle = color;
    ctx.lineWidth = 1;

    const pxPerMm = 3.78; // approx conversion mm -> px
    const step = size * pxPerMm;

    switch(type) {
        case "vierge":
            // rien à dessiner
            break;
        case "quadrille5":
        case "quadrille10":
        case "quadrille2.5":
        case "pointille5":
        case "pointille10":
        case "ligneSimple":
        case "ligneDouble":
            drawGrid(ctx, canvas, step, type);
            break;
        case "isometrique":
            drawIsometric(ctx, canvas, step);
            break;
        case "hexagonale":
            drawHex(ctx, canvas, step);
            break;
    }
}

function drawGrid(ctx, canvas, step, type) {
    for(let x=0;x<=canvas.width;x+=step){
        ctx.beginPath();
        ctx.moveTo(x,0);
        ctx.lineTo(x,canvas.height);
        ctx.stroke();
    }
    for(let y=0;y<=canvas.height;y+=step){
        ctx.beginPath();
        ctx.moveTo(0,y);
        ctx.lineTo(canvas.width,y);
        ctx.stroke();
    }
    if(type==="ligneDouble"){
        // Ajouter ligne intermédiaire pour doubles
        let halfStep = step/2;
        for(let y=0;y<=canvas.height;y+=step){
            ctx.beginPath();
            ctx.moveTo(0,y+halfStep);
            ctx.lineTo(canvas.width,y+halfStep);
            ctx.stroke();
        }
    }
}

function drawIsometric(ctx, canvas, step){
    let height = Math.sin(Math.PI/3)*step;
    for(let y=0;y<=canvas.height+height;y+=height){
        for(let x=0;x<=canvas.width+step;x+=step){
            ctx.beginPath();
            ctx.moveTo(x,y);
            ctx.lineTo(x+step/2,y-height);
            ctx.lineTo(x+step,y);
            ctx.stroke();
        }
    }
}

function drawHex(ctx, canvas, step){
    const hexHeight = Math.sqrt(3)/2 * step;
    for(let y=0;y<=canvas.height+hexHeight;y+=hexHeight){
        for(let x=0;x<=canvas.width+step;x+=step*3/4){
            drawSingleHex(ctx, x, y, step);
        }
    }
}

function drawSingleHex(ctx, x, y, size){
    const angle = Math.PI/3;
    ctx.beginPath();
    for(let i=0;i<6;i++){
        let xi = x + size*Math.cos(angle*i);
        let yi = y + size*Math.sin(angle*i);
        if(i===0) ctx.moveTo(xi,yi);
        else ctx.lineTo(xi,yi);
    }
    ctx.closePath();
    ctx.stroke();
}

function downloadPNG(){
    let canvas = document.getElementById("sheet");
    let link = document.createElement('a');
    link.download = 'feuille.png';
    link.href = canvas.toDataURL();
    link.click();
}

function downloadPDF(){
    let canvas = document.getElementById("sheet");
    let imgData = canvas.toDataURL('image/png');
    let pdf = new jsPDF('p', 'pt', [canvas.width, canvas.height]);
    pdf.addImage(imgData, 'PNG', 0, 0, canvas.width, canvas.height);
    pdf.save('feuille.pdf');
}


 
